<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Lynx vs AEGIS Dashboard</title>
  </head>
  <body>
    <h1>Lynx vs AEGIS</h1>
  <input id="url" placeholder="http://example.com" style="width:400px" />
  <button id="start">Start</button>
  <button id="stop">Stop</button>
  <button id="policies">Show Policies</button>
    <pre id="out" style="height:400px;overflow:auto;border:1px solid #ccc;padding:8px"></pre>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script>
      const s = io();
      const out = document.getElementById('out');
      document.getElementById('start').onclick = () => {
        const url = document.getElementById('url').value || 'http://example.com';
        s.emit('start', url);
      }
      s.on('log', (m) => { out.textContent += '\n' + m; });
      s.on('lynx', (m) => { out.textContent += '\n[Lynx] ' + JSON.stringify(m).slice(0,200); });
      s.on('aegis', (m) => { out.textContent += '\n[AEGIS] ' + JSON.stringify(m).slice(0,200); });
      s.on('logs', (m) => { out.textContent += '\n[LOGS] Lynx:' + m.lynx.length + ' Aegis:' + m.aegis.length; });
      document.getElementById('stop').onclick = () => s.emit('stop');
      document.getElementById('policies').onclick = async () => {
        const resp = await fetch('/api/policies');
        const data = await resp.json();
        out.textContent += '\n[POLICIES] ' + JSON.stringify(data);
      }
    </script>
  </body>
  </html>
